name: cleanup

on:
  workflow_call:
    inputs:
      runner_os:
        required: false
        type: string

jobs:
  cleanup:
    runs-on: ${{ inputs.runner_os || 'ubuntu-latest' }}
    steps:
      # Remove Java (JDKs)
      # Remove .NET SDKs
      # Remove Swift toolchain
      # Remove Haskell (GHC)
      # Remove Julia
      # Remove Android SDKs
      # Remove Azure CLI
      # Remove PowerShell
      # Remove CodeQL and other toolcaches
      - name: Aggressive cleanup
        run: |
          df -h
          sudo rm -rf /usr/lib/jvm
          sudo rm -rf /usr/share/dotnet
          sudo rm -rf /usr/share/swift
          sudo rm -rf /usr/local/.ghcup
          sudo rm -rf /usr/local/julia*
          sudo rm -rf /usr/local/lib/android
          sudo rm -rf /opt/az
          sudo rm -rf /usr/local/share/powershell
          sudo rm -rf /opt/hostedtoolcache
          docker system prune -af || true
          docker builder prune -af || true
          df -h
